{"remainingRequest":"/Users/lalow_/Desktop/Front/node_modules/babel-loader/lib/index.js!/Users/lalow_/Desktop/Front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lalow_/Desktop/Front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lalow_/Desktop/Front/src/views/Rating.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lalow_/Desktop/Front/src/views/Rating.vue","mtime":1616322460000},{"path":"/Users/lalow_/Desktop/Front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2xhbG93Xy9EZXNrdG9wL0Zyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0UHJvZmlsZSwgZ2V0UHJvZmlsZUluZm8sIGdldFJhdGluZyB9IGZyb20gIi4uL2FwaS9hdXRoIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc0xvYWRlZDogZmFsc2UsCiAgICAgIHJhdGluZzogW10sCiAgICAgIHNob3dNb2RhbE9uZTogZmFsc2UsCiAgICAgIHNlbGVjdFBlcnNvbjogdW5kZWZpbmVkCiAgICB9OwogIH0sCiAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbiBiZWZvcmVDcmVhdGUoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciByZXM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gZ2V0UmF0aW5nKCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKHJlcyAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgICAgICBfdGhpcy5yYXRpbmcgPSByZXMudG9wOwogICAgICAgICAgICAgICAgX3RoaXMuaXNMb2FkZWQgPSB0cnVlOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcign0J7RiNC40LHQutCwINC/0L7Qu9GD0YfQtdC90LjRjyDQv9C10YDRgdC+0L3QsNC20LXQuScpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNob3dQZXJzb25JbmZvOiBmdW5jdGlvbiBzaG93UGVyc29uSW5mbyhwZXJzb24pIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgcHJvZmlsZSA9IGdldFByb2ZpbGVJbmZvKHBlcnNvbi5pZF91c2VyKTsKCiAgICAgIGlmIChwcm9maWxlICE9PSBmYWxzZSkgewogICAgICAgIHByb2ZpbGUudGhlbihmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICBfdGhpczIuc2VsZWN0UGVyc29uID0gdmFsOwogICAgICAgICAgaWYgKCFfdGhpczIuc2hvd01vZGFsT25lKSBfdGhpczIuc2hvd01vZGFsT25lID0gIV90aGlzMi5zaG93TW9kYWxPbmU7CiAgICAgICAgICBjb25zb2xlLmxvZygi0JLRi9Cx0YDQsNC90L3Ri9C5INC/0YDQvtGE0LjQu9GMOiAiLCB2YWwpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgdG9Qcm9maWxlOiBmdW5jdGlvbiB0b1Byb2ZpbGUoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvc3RhcnQnKTsKICAgIH0sCiAgICBnZXRNeVByb2ZpbGU6IGZ1bmN0aW9uIGdldE15UHJvZmlsZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAvLyDQv9C+0LvRg9GH0LXQvdC40LUg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1CiAgICAgIHZhciBwcm9maWxlID0gZ2V0UHJvZmlsZSgpOwogICAgICBjb25zb2xlLmxvZyhwcm9maWxlKTsKCiAgICAgIGlmIChwcm9maWxlICE9PSBmYWxzZSkgewogICAgICAgIHRoaXMucHJvZmlsZVVzZXIgPSBwcm9maWxlOwogICAgICAgIHByb2ZpbGUudGhlbihmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICBfdGhpczMucHJvZmlsZVVzZXIgPSB2YWw7CiAgICAgICAgICBjb25zb2xlLmxvZygi0J/RgNC+0YTQuNC70Yw6ICIsIF90aGlzMy5wcm9maWxlVXNlcik7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign0J7RiNC40LHQutCwINC/0L7Qu9GD0YfQtdC90LjRjyDQv9GA0L7RhNC40LvRjycpOwogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRNeVByb2ZpbGUoKTsKICAgIHRoaXMuaXNMb2FkZWQgPSB0cnVlOwogIH0KfTs="},{"version":3,"sources":["Rating.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA,SAAA,UAAA,EAAA,cAAA,EAAA,SAAA,QAAA,aAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,KADA;AAEA,MAAA,MAAA,EAAA,EAFA;AAGA,MAAA,YAAA,EAAA,KAHA;AAIA,MAAA,YAAA,EAAA;AAJA,KAAA;AAMA,GARA;AASA,EAAA,YATA,0BASA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEA,SAAA,EAFA;;AAAA;AAEA,cAAA,GAFA;;AAGA,kBAAA,GAAA,KAAA,KAAA,EAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,gBAAA,KAAA,CAAA,MAAA,GAAA,GAAA,CAAA,GAAA;AACA,gBAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA,eAJA,MAIA;AACA,gBAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,6BAAA;AACA;;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA,GAnBA;AAoBA,EAAA,OAAA,EAAA;AACA,IAAA,cAAA,EAAA,wBAAA,MAAA,EAAA;AAAA;;AACA,UAAA,OAAA,GAAA,cAAA,CAAA,MAAA,CAAA,OAAA,CAAA;;AACA,UAAA,OAAA,KAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,YAAA,GAAA,GAAA;AACA,cAAA,CAAA,MAAA,CAAA,YAAA,EACA,MAAA,CAAA,YAAA,GAAA,CAAA,MAAA,CAAA,YAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,qBAAA,EAAA,GAAA;AACA,SALA;AAMA;AACA,KAXA;AAYA,IAAA,SAAA,EAAA,qBAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,KAdA;AAeA,IAAA,YAAA,EAAA,wBAAA;AAAA;;AACA;AACA,UAAA,OAAA,GAAA,UAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,OAAA;;AACA,UAAA,OAAA,KAAA,KAAA,EAAA;AACA,aAAA,WAAA,GAAA,OAAA;AACA,QAAA,OAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,WAAA,GAAA,GAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,WAAA,EAAA,MAAA,CAAA,WAAA;AACA,SAHA;AAIA,OANA,MAMA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,0BAAA;AACA;AACA;AA5BA,GApBA;AAkDA,EAAA,OAlDA,qBAkDA;AACA,SAAA,YAAA;AACA,SAAA,QAAA,GAAA,IAAA;AACA;AArDA,CAAA","sourcesContent":["<template>\n<a-row type=\"flex\" justify=\"center\" v-if=\"isLoaded\">\n  <a-col :span=\"24\">\n      <div class=\"box\">\n        <h2 style=\"font-size: 28pt;\">Рейтинг</h2>\n        <div class=\"button-group\">\n          <a-button block v-on:click=\"toProfile()\" style=\"font-size: 16pt; height: 60px\">Вернуться в профиль</a-button>\n        </div>\n        <div class=\"rating-list\">\n          <table width=\"100%\" border=\"1\"  style=\"margin-top: 15px;\">\n            <tr>\n              <th>№</th>\n              <th><a-icon slot=\"prefix\" type=\"qq\" title=\"Персонаж\" /></th>\n              <th><a-icon slot=\"prefix\" type=\"user\" title=\"Логин\" /></th>\n              <th><a-icon slot=\"prefix\" type=\"dashboard\" title=\"Информационное здоровь\" /></th>\n              <th><a-icon slot=\"prefix\" type=\"dollar\" title=\"Деньги\" /></th>\n              <th><a-icon slot=\"prefix\" type=\"retweet\" title=\"Количество раундов\" /></th>\n              <th><a-icon slot=\"prefix\" type=\"star\" title=\"Очков\" /></th>\n            </tr>\n            <tr v-for=\"(item, index) in this.rating\">\n              <template v-if=\"index < 20\">\n                <td>\n                  <img src=\"../assets/cup1.png\" v-if=\"index === 0\" style=\"width: 24px; margin: 3px;\" />\n                  <img src=\"../assets/cup2.png\" v-else-if=\"index === 1\" style=\"width: 24px; margin: 3px;\" />\n                  <img src=\"../assets/cup3.png\" v-else-if=\"index === 2\" style=\"width: 24px; margin: 3px;\" />\n                  <template v-else>{{item.id}}</template>\n                </td>\n                <td><a-avatar :size=\"64\" :src=\"item.person_pic\" /></td>\n                <td @click.prevent=\"showPersonInfo(item)\"><b style=\"cursor: pointer; text-decoration: underline;\">{{item.user_name}}</b></td>\n                <td>{{item.health}}</td>\n                <td>{{item.money}}</td>\n                <td>{{item.round}}</td>\n                <td>{{item.point}}</td>\n              </template>\n              <template v-else-if=\"rating.length === 25 && index === 20\">\n                <td>...</td>\n                <td></td>\n                <td>...</td>\n                <td>...</td>\n                <td>...</td>\n                <td>...</td>\n                <td>...</td>\n              </template>\n              <template v-else-if=\"item.user_name === profileUser.names\">\n                <td style=\"background: #1b68b380;\">{{item.id}}</td>\n                <td style=\"background: #1b68b380;\"><a-avatar :size=\"64\" :src=\"item.person_pic\" /></td>\n                <td style=\"background: #1b68b380;\" @click.prevent=\"showPersonInfo(item)\"><b style=\"cursor: pointer; text-decoration: underline;\">{{item.user_name}}</b></td>\n                <td style=\"background: #1b68b380;\">{{item.health}}</td>\n                <td style=\"background: #1b68b380;\">{{item.money}}</td>\n                <td style=\"background: #1b68b380;\">{{item.round}}</td>\n                <td style=\"background: #1b68b380;\">{{item.point}}</td>\n              </template>\n              <template v-else>\n                <td>{{item.id}}</td>\n                <td><a-avatar :size=\"64\" :src=\"item.person_pic\" /></td>\n                <td @click.prevent=\"showPersonInfo(item)\"><b style=\"cursor: pointer; text-decoration: underline;\">{{item.user_name}}</b></td>\n                <td>{{item.health}}</td>\n                <td>{{item.money}}</td>\n                <td>{{item.round}}</td>\n                <td>{{item.point}}</td>\n              </template>\n            </tr>\n          </table>\n        </div>\n      </div>\n    <div class=\"selectProfileModal\" v-if=\"showModalOne\">\n      <div class=\"selectProfileModalTitle\">{{selectPerson.name}}</div>\n      <div class=\"selectProfileModalBody\">\n        <a-row class=\"title-profile\">\n          <a-col :span=\"8\">\n            <a-avatar :size=\"128\" :src=\"this.selectPerson.pic\" />\n          </a-col>\n          <a-col :span=\"16\" class=\"mini-rating\">\n            <div>Имя: {{selectPerson.names}}</div>\n            <div>Игры сыграно: {{selectPerson.count_game}}</div>\n            <div>Максимально прожито дней: {{selectPerson.max_point}}</div>\n          </a-col>\n        </a-row>\n\n        <div class=\"person-list\">\n          <h1 block>История игр</h1>\n          <div v-for=\"item in this.selectPerson.game_history\" style=\"border: 1px solid black;\">\n            <table width=\"100%\" border=\"1\">\n              <tr>\n                <th>Здоровье</th>\n                <th>Очки</th>\n              </tr>\n              <tr>\n                <td>{{item.health}}</td>\n                <td>{{item.point}}</td>\n              </tr>\n            </table>\n          </div>\n        </div>\n      </div>\n      <div class=\"selectProfileModalFooter\">\n        <button class=\"btn btn-primary\" @click.prevent=\"showModalOne = !showModalOne\">Закрыть</button>\n      </div>\n    </div>\n  </a-col>\n</a-row>\n</template>\n\n<script>\nimport {getProfile, getProfileInfo, getRating} from \"../api/auth\";\n\nexport default {\n  data() {\n    return {\n      isLoaded: false,\n      rating: [],\n      showModalOne: false,\n      selectPerson: undefined\n    }\n  },\n  async beforeCreate() {\n    // получение рейтинга пользователей\n    let res = await getRating()\n    if (res !== false) {\n      console.log(res);\n      this.rating = res.top;\n      this.isLoaded = true;\n    } else {\n      this.$message.error('Ошибка получения персонажей');\n    }\n  },\n  methods: {\n    showPersonInfo: function(person) {\n      let profile = getProfileInfo(person.id_user)\n      if (profile !== false) {\n        profile.then(val => {\n          this.selectPerson = val;\n          if (!this.showModalOne)\n            this.showModalOne = !this.showModalOne\n          console.log(\"Выбранный профиль: \", val)\n        });\n      }\n    },\n    toProfile: function () {\n      this.$router.push('/start');\n    },\n    getMyProfile: function () {\n      // получение информации о пользователе\n      let profile = getProfile()\n      console.log(profile);\n      if (profile !== false) {\n        this.profileUser = profile;\n        profile.then(val => {\n          this.profileUser = val\n          console.log(\"Профиль: \", this.profileUser)\n        });\n      } else {\n        this.$message.error('Ошибка получения профиля');\n      }\n    },\n  },\n  mounted() {\n    this.getMyProfile();\n    this.isLoaded = true;\n  },\n};\n</script>\n<style>\n.rating-list {\n  margin-top: 5px;\n}\n.selectProfileModal {\n  box-shadow: 0px 1px 12px rgba(0, 0, 0, 0.4);\n  margin:0 auto;\n  position: absolute;\n  z-index: 999;\n  width: 600px;\n  top: 20vh;\n  border-radius: 5px;\n  overflow: hidden;\n}\n.selectProfileModal .selectProfileModalTitle {\n  background-color: #eee;\n  text-align: left;\n  padding: 8px 12px;\n  font-size: 1.5em;\n}\n.selectProfileModal .selectProfileModalTitle .close {\n  line-height: 32px;\n  color: #5c4084;\n}\n.selectProfileModal .selectProfileModalBody {\n  background-color: #fff;\n  padding: 8px 12px;\n  text-align: left;\n  padding: 12px;\n}\n.selectProfileModal .selectProfileModalFooter {\n  background-color: #eee;\n  padding: 4px 12px;\n  text-align: left;\n}\n</style>\n"],"sourceRoot":"src/views"}]}