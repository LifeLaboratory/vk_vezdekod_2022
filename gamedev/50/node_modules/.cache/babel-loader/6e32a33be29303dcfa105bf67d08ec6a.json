{"remainingRequest":"/Users/lalow_/Desktop/Front/node_modules/babel-loader/lib/index.js!/Users/lalow_/Desktop/Front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lalow_/Desktop/Front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lalow_/Desktop/Front/src/views/Auth.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lalow_/Desktop/Front/src/views/Auth.vue","mtime":1616322460000},{"path":"/Users/lalow_/Desktop/Front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2xhbG93Xy9EZXNrdG9wL0Zyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgYXV0aFVzZXIsIGdldFByb2ZpbGUgfSBmcm9tICIuLi9hcGkvYXV0aCI7CmV4cG9ydCBkZWZhdWx0IHsKICBiZWZvcmVDcmVhdGU6IGZ1bmN0aW9uIGJlZm9yZUNyZWF0ZSgpIHsKICAgIHRoaXMuZm9ybSA9IHRoaXMuJGZvcm0uY3JlYXRlRm9ybSh0aGlzLCB7CiAgICAgIG5hbWU6ICdub3JtYWxfbG9naW4nCiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy5mb3JtLnZhbGlkYXRlRmllbGRzKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGVyciwgdmFsdWVzKSB7CiAgICAgICAgICB2YXIgcmVzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCB2YWx1ZXMgb2YgZm9ybTogJywgdmFsdWVzKTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIHJldHVybiBhdXRoVXNlcih2YWx1ZXMpOwoKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICAgIGlmICghcmVzLmVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5lcnJvcik7CgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgIGlmIChyZXMgIT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Nlc3Npb24nLCByZXMuc2Vzc2lvbik7CgogICAgICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgnL3N0YXJ0Jyk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoItCf0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDRgSDRgtCw0LrQuNC8INC40LzQtdC90LXQvCDQuCDQv9Cw0YDQvtC70LXQvCDQvdC1INGB0YPRidC10YHRgtCy0YPQtdGCIik7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIpIHsKICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb24nKSAhPT0gbnVsbCkgewogICAgICB2YXIgcHJvZmlsZSA9IGdldFByb2ZpbGUoKTsKCiAgICAgIGlmIChwcm9maWxlICE9PSBmYWxzZSkgewogICAgICAgIHRoaXMucHJvZmlsZVVzZXIgPSBwcm9maWxlOwogICAgICAgIHByb2ZpbGUudGhlbihmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICBfdGhpczIucHJvZmlsZVVzZXIgPSB2YWw7CiAgICAgICAgICBjb25zb2xlLmxvZygi0J/RgNC+0YTQuNC70Yw6ICIsIF90aGlzMi5wcm9maWxlVXNlcik7CgogICAgICAgICAgaWYgKF90aGlzMi5wcm9maWxlVXNlciAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCgnL3N0YXJ0Jyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["Auth.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA,SAAA,QAAA,EAAA,UAAA,QAAA,aAAA;AAEA,eAAA;AACA,EAAA,YADA,0BACA;AACA,SAAA,IAAA,GAAA,KAAA,KAAA,CAAA,UAAA,CAAA,IAAA,EAAA;AAAA,MAAA,IAAA,EAAA;AAAA,KAAA,CAAA;AACA,GAHA;AAIA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,CADA,EACA;AAAA;;AACA,MAAA,CAAA,CAAA,cAAA;AACA,WAAA,IAAA,CAAA,cAAA;AAAA,2EAAA,iBAAA,GAAA,EAAA,MAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA,GADA;AAAA;AAAA;AAAA;;AAEA,kBAAA,OAAA,CAAA,GAAA,CAAA,2BAAA,EAAA,MAAA;AAFA;AAAA,yBAGA,QAAA,CAAA,MAAA,CAHA;;AAAA;AAGA,kBAAA,GAHA;;AAAA,uBAIA,GAAA,CAAA,KAJA;AAAA;AAAA;AAAA;;AAKA,kBAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,CAAA,KAAA;;AALA;;AAAA;AAQA,sBAAA,GAAA,KAAA,KAAA,EAAA;AACA,oBAAA,YAAA,CAAA,OAAA,CAAA,SAAA,EAAA,GAAA,CAAA,OAAA;;AACA,oBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,mBAHA,MAGA;AACA,oBAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,qDAAA;AACA;;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAA;;AAAA;AAAA;AAAA;AAAA;AAgBA;AAnBA,GAJA;AAyBA,EAAA,OAzBA,qBAyBA;AAAA;;AACA,QAAA,YAAA,CAAA,OAAA,CAAA,SAAA,MAAA,IAAA,EAAA;AACA,UAAA,OAAA,GAAA,UAAA,EAAA;;AACA,UAAA,OAAA,KAAA,KAAA,EAAA;AACA,aAAA,WAAA,GAAA,OAAA;AACA,QAAA,OAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,WAAA,GAAA,GAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,WAAA,EAAA,MAAA,CAAA,WAAA;;AACA,cAAA,MAAA,CAAA,WAAA,KAAA,KAAA,EAAA;AACA,YAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA;AACA,SANA;AAOA;AACA;AACA;AAvCA,CAAA","sourcesContent":["<template>\n<a-row type=\"flex\" justify=\"center\">\n  <a-col :span=\"35\">\n    <div class=\"box\">\n      <h2 style=\"font-size: 20pt;\">Авторизация</h2>\n        <a-form\n          id=\"components-form\"\n          :form=\"form\"\n          class=\"form\"\n          @submit=\"handleSubmit\"\n        >\n          <a-form-item>\n            <a-input\n              v-decorator=\"[\n                'login',\n                { rules: [{ required: true, message: 'Введите имя!' }] },\n              ]\"\n              placeholder=\"Username\"\n              style=\"font-size: 20pt; height: 60px\"\n            >\n              <a-icon slot=\"prefix\" type=\"user\" style=\"color: rgba(0,0,0,.25);\" />\n            </a-input>\n          </a-form-item>\n          <a-form-item>\n            <a-input\n              v-decorator=\"[\n                'password',\n                { rules: [{ required: true, message: 'Введите пароль!' }] },\n              ]\"\n              type=\"password\"\n              placeholder=\"Password\"\n              style=\"font-size: 20pt; height: 60px\"\n            >\n              <a-icon slot=\"prefix\" type=\"lock\" style=\"color: rgba(0,0,0,.25)\" />\n            </a-input>\n          </a-form-item>\n          <a-form-item style=\"font-size: 20pt;\">\n            <a-button type=\"primary\" html-type=\"submit\" class=\"form-button\" style=\"margin-bottom: 15px;\">\n              Вход\n            </a-button>\n            или\n            <router-link to=\"/reg\" style=\"color: #5a0000;\">\n              Зарегистрироваться\n            </router-link>\n          </a-form-item>\n        </a-form>\n      </div>\n    </a-col>\n</a-row>\n</template>\n\n<script>\nimport {authUser, getProfile} from \"../api/auth\";\n\nexport default {\n  beforeCreate() {\n    this.form = this.$form.createForm(this, { name: 'normal_login' });\n  },\n  methods: {\n    handleSubmit(e) {\n      e.preventDefault();\n      this.form.validateFields( async (err, values) => {\n        if (!err) {\n          console.log('Received values of form: ', values);\n          let res = await authUser(values)\n          if (res.error) {\n            this.$message.error(res.error);\n            return\n          }\n          if (res !== false) {\n            localStorage.setItem('session', res.session)\n            this.$router.push('/start')\n          } else {\n            this.$message.error(\"Пользователь с таким именем и паролем не существует\");\n          }\n        }\n      });\n    },\n  },\n  mounted() {\n    if (localStorage.getItem('session') !== null) {\n      let profile = getProfile()\n      if (profile !== false) {\n        this.profileUser = profile;\n        profile.then(val => {\n          this.profileUser = val\n          console.log(\"Профиль: \", this.profileUser);\n          if (this.profileUser !== false) {\n            this.$router.push('/start')\n          }\n        });\n      }\n    }\n  },\n};\n</script>\n<style>\n#components-form .form {\n  max-width: 300px;\n}\n#components-form .form-button {\n  width: 100%;\n  font-size: 28pt;\n  height: 75px;\n}\n.ant-input-affix-wrapper .ant-input:not(:first-child) {\n  padding-left: 50px;\n}\n</style>\n"],"sourceRoot":"src/views"}]}