{"remainingRequest":"/Users/lalow_/Desktop/Front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lalow_/Desktop/Front/src/views/Auth.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lalow_/Desktop/Front/src/views/Auth.vue","mtime":1616322460000},{"path":"/Users/lalow_/Desktop/Front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7YXV0aFVzZXIsIGdldFByb2ZpbGV9IGZyb20gIi4uL2FwaS9hdXRoIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBiZWZvcmVDcmVhdGUoKSB7CiAgICB0aGlzLmZvcm0gPSB0aGlzLiRmb3JtLmNyZWF0ZUZvcm0odGhpcywgeyBuYW1lOiAnbm9ybWFsX2xvZ2luJyB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVN1Ym1pdChlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy5mb3JtLnZhbGlkYXRlRmllbGRzKCBhc3luYyAoZXJyLCB2YWx1ZXMpID0+IHsKICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgY29uc29sZS5sb2coJ1JlY2VpdmVkIHZhbHVlcyBvZiBmb3JtOiAnLCB2YWx1ZXMpOwogICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IGF1dGhVc2VyKHZhbHVlcykKICAgICAgICAgIGlmIChyZXMuZXJyb3IpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMuZXJyb3IpOwogICAgICAgICAgICByZXR1cm4KICAgICAgICAgIH0KICAgICAgICAgIGlmIChyZXMgIT09IGZhbHNlKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzZXNzaW9uJywgcmVzLnNlc3Npb24pCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvc3RhcnQnKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi0J/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINGBINGC0LDQutC40Lwg0LjQvNC10L3QtdC8INC4INC/0LDRgNC+0LvQtdC8INC90LUg0YHRg9GJ0LXRgdGC0LLRg9C10YIiKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb24nKSAhPT0gbnVsbCkgewogICAgICBsZXQgcHJvZmlsZSA9IGdldFByb2ZpbGUoKQogICAgICBpZiAocHJvZmlsZSAhPT0gZmFsc2UpIHsKICAgICAgICB0aGlzLnByb2ZpbGVVc2VyID0gcHJvZmlsZTsKICAgICAgICBwcm9maWxlLnRoZW4odmFsID0+IHsKICAgICAgICAgIHRoaXMucHJvZmlsZVVzZXIgPSB2YWwKICAgICAgICAgIGNvbnNvbGUubG9nKCLQn9GA0L7RhNC40LvRjDogIiwgdGhpcy5wcm9maWxlVXNlcik7CiAgICAgICAgICBpZiAodGhpcy5wcm9maWxlVXNlciAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9zdGFydCcpCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["Auth.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Auth.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<a-row type=\"flex\" justify=\"center\">\n  <a-col :span=\"35\">\n    <div class=\"box\">\n      <h2 style=\"font-size: 20pt;\">Авторизация</h2>\n        <a-form\n          id=\"components-form\"\n          :form=\"form\"\n          class=\"form\"\n          @submit=\"handleSubmit\"\n        >\n          <a-form-item>\n            <a-input\n              v-decorator=\"[\n                'login',\n                { rules: [{ required: true, message: 'Введите имя!' }] },\n              ]\"\n              placeholder=\"Username\"\n              style=\"font-size: 20pt; height: 60px\"\n            >\n              <a-icon slot=\"prefix\" type=\"user\" style=\"color: rgba(0,0,0,.25);\" />\n            </a-input>\n          </a-form-item>\n          <a-form-item>\n            <a-input\n              v-decorator=\"[\n                'password',\n                { rules: [{ required: true, message: 'Введите пароль!' }] },\n              ]\"\n              type=\"password\"\n              placeholder=\"Password\"\n              style=\"font-size: 20pt; height: 60px\"\n            >\n              <a-icon slot=\"prefix\" type=\"lock\" style=\"color: rgba(0,0,0,.25)\" />\n            </a-input>\n          </a-form-item>\n          <a-form-item style=\"font-size: 20pt;\">\n            <a-button type=\"primary\" html-type=\"submit\" class=\"form-button\" style=\"margin-bottom: 15px;\">\n              Вход\n            </a-button>\n            или\n            <router-link to=\"/reg\" style=\"color: #5a0000;\">\n              Зарегистрироваться\n            </router-link>\n          </a-form-item>\n        </a-form>\n      </div>\n    </a-col>\n</a-row>\n</template>\n\n<script>\nimport {authUser, getProfile} from \"../api/auth\";\n\nexport default {\n  beforeCreate() {\n    this.form = this.$form.createForm(this, { name: 'normal_login' });\n  },\n  methods: {\n    handleSubmit(e) {\n      e.preventDefault();\n      this.form.validateFields( async (err, values) => {\n        if (!err) {\n          console.log('Received values of form: ', values);\n          let res = await authUser(values)\n          if (res.error) {\n            this.$message.error(res.error);\n            return\n          }\n          if (res !== false) {\n            localStorage.setItem('session', res.session)\n            this.$router.push('/start')\n          } else {\n            this.$message.error(\"Пользователь с таким именем и паролем не существует\");\n          }\n        }\n      });\n    },\n  },\n  mounted() {\n    if (localStorage.getItem('session') !== null) {\n      let profile = getProfile()\n      if (profile !== false) {\n        this.profileUser = profile;\n        profile.then(val => {\n          this.profileUser = val\n          console.log(\"Профиль: \", this.profileUser);\n          if (this.profileUser !== false) {\n            this.$router.push('/start')\n          }\n        });\n      }\n    }\n  },\n};\n</script>\n<style>\n#components-form .form {\n  max-width: 300px;\n}\n#components-form .form-button {\n  width: 100%;\n  font-size: 28pt;\n  height: 75px;\n}\n.ant-input-affix-wrapper .ant-input:not(:first-child) {\n  padding-left: 50px;\n}\n</style>\n"]}]}