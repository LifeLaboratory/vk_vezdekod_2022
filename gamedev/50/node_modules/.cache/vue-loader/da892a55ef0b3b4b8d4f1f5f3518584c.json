{"remainingRequest":"/Users/lalow_/Desktop/Front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lalow_/Desktop/Front/src/views/Game.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lalow_/Desktop/Front/src/views/Game.vue","mtime":1650799341958},{"path":"/Users/lalow_/Desktop/Front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bmV3R2FtZSwgcmVsb2FkR2FtZSwgc2VuZEFuc3dlciwgcmVzdW1lR2FtZX0gZnJvbSAnQC9hcGkvZ2FtZScKaW1wb3J0IHtnZXRQcm9maWxlfSBmcm9tICIuLi9hcGkvYXV0aCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpczogZmFsc2UsCiAgICAgIHVzZXI6IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICBoZWFsdGg6IDAsCiAgICAgICAgbW9uZXk6IDAsCiAgICAgICAgcG9pbnQ6IDAsCiAgICAgICAgcm91bmQ6IDAKICAgICAgfSwKCiAgICAgIHBpYzogJycsCiAgICAgIGRheTogMCwKICAgICAgbGVmdDogJycsCiAgICAgIHJpZ2h0OiAnJywKICAgICAgZGVzY3I6ICcnLAoKICAgICAgbGVmdEFjdGlvbjoge30sCgogICAgICBzaG93X2J0bjogZmFsc2UsCiAgICAgIHNob3dfZmlyZTogZmFsc2UKCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICB0b1Byb2ZpbGU6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9zdGFydCcpOwogICAgfSwKICAgIHRvUmF0aW5nOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9yYXRpbmcnKTsKICAgIH0sCgogICAgYXN5bmMgc3RhcnROZXdHYW1lKCkgewogICAgICBsZXQgaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZAogICAgICBpZiAoIWlkKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICdzdGFydCd9KQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHtpZDogJy0xJ30pCgoKICAgICAgbGV0IHJlcyA9IGF3YWl0IG5ld0dhbWUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb24nKSwgaWQpCiAgICAgIHRoaXMuZGF5ID0gcmVzLnJvdW5kCiAgICAgIHRoaXMuZGVzY3IgPSByZXMuZGVzY3JpcHRpb24KICAgICAgdGhpcy5sZWZ0ID0gcmVzLmxlZnRfYW5zd2VyCiAgICAgIHRoaXMucmlnaHQgPSByZXMucmlnaHRfYW5zd2VyCiAgICAgIHRoaXMucGljID0gZmFsc2U7CgogICAgICB0aGlzLnBpYyA9IHJlcy5waWMKICAgICAgdGhpcy51c2VyLnBpYyA9IHJlcy5wZXJzb25fcGljCiAgICAgIHRoaXMudXNlci5uYW1lID0gcmVzLm5hbWUKICAgICAgdGhpcy51c2VyLmhlYWx0aCA9IHJlcy5oZWFsdGgKICAgICAgdGhpcy51c2VyLm1vbmV5ID0gcmVzLm1vbmV5CiAgICAgIHRoaXMudXNlci5wb2ludCA9IHJlcy5wb2ludAogICAgICB0aGlzLnVzZXIucm91bmQgPSByZXMucm91bmQKICAgICAgdGhpcy5hbnN3ZXJzID0gcmVzLmFuc3dlcjsKICAgICAgdGhpcy5lbmRfZ2FtZSA9IHJlcy5lbmRfZ2FtZTsKCiAgICAgIGxldCBwcm9maWxlID0gZ2V0UHJvZmlsZSgpCiAgICAgIGlmIChwcm9maWxlICE9PSBmYWxzZSkgewogICAgICAgIHRoaXMucHJvZmlsZVVzZXIgPSBwcm9maWxlOwogICAgICAgIHByb2ZpbGUudGhlbih2YWwgPT4gewogICAgICAgICAgdGhpcy5wcm9maWxlVXNlciA9IHZhbAogICAgICAgICAgY29uc29sZS5sb2coItCf0YDQvtGE0LjQu9GMOiAiLCB0aGlzLnByb2ZpbGVVc2VyKQogICAgICAgICAgLy8gdGhpcy51c2VyLnBpYyA9IHRoaXMucHJvZmlsZVVzZXIucGljOwogICAgICAgICAgdGhpcy51c2VyLm5hbWUgPSB0aGlzLnByb2ZpbGVVc2VyLm5hbWVzOwogICAgICAgIH0pOwogICAgICB9CgogICAgfSwKCiAgICBhc3luYyByZXN1bWVHYW1lKCkgewogICAgICBsZXQgcmVzID0gYXdhaXQgcmVzdW1lR2FtZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvbicpKQogICAgICB0aGlzLmRheSA9IHJlcy5yb3VuZAogICAgICB0aGlzLmRlc2NyID0gcmVzLmRlc2NyaXB0aW9uCiAgICAgIHRoaXMubGVmdCA9IHJlcy5sZWZ0X2Fuc3dlcgogICAgICB0aGlzLnJpZ2h0ID0gcmVzLnJpZ2h0X2Fuc3dlcgogICAgICB0aGlzLmFuc3dlcnMgPSByZXMuYW5zd2VyOwogICAgICB0aGlzLmVuZF9nYW1lID0gcmVzLmVuZF9nYW1lOwoKICAgICAgY29uc29sZS5sb2codGhpcy5hbnN3ZXJzKTsKCiAgICAgIHRoaXMucGljID0gcmVzLnBpYwogICAgICB0aGlzLnVzZXIucGljID0gcmVzLnBlcnNvbl9waWMKICAgICAgdGhpcy51c2VyLmhlYWx0aCA9IHJlcy5oZWFsdGgKICAgICAgdGhpcy51c2VyLm1vbmV5ID0gcmVzLm1vbmV5CiAgICAgIHRoaXMudXNlci5wb2ludCA9IHJlcy5wb2ludAogICAgICB0aGlzLnVzZXIucm91bmQgPSByZXMucm91bmQKCgogICAgICBsZXQgcHJvZmlsZSA9IGdldFByb2ZpbGUoKQogICAgICBpZiAocHJvZmlsZSAhPT0gZmFsc2UpIHsKICAgICAgICB0aGlzLnByb2ZpbGVVc2VyID0gcHJvZmlsZTsKICAgICAgICBwcm9maWxlLnRoZW4odmFsID0+IHsKICAgICAgICAgIHRoaXMucHJvZmlsZVVzZXIgPSB2YWwKICAgICAgICAgIGNvbnNvbGUubG9nKCLQn9GA0L7RhNC40LvRjDogIiwgdGhpcy5wcm9maWxlVXNlcikKICAgICAgICAgIC8vIHRoaXMudXNlci5waWMgPSB0aGlzLnByb2ZpbGVVc2VyLnBpYzsKICAgICAgICAgIHRoaXMudXNlci5uYW1lID0gdGhpcy5wcm9maWxlVXNlci5uYW1lczsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKCiAgICBhc3luYyBzZW5kQW5zd2VyKGFucykgewogICAgICB0aGlzLmRpcyA9IHRydWUKICAgICAgdGhpcy5waWMgPSB1bmRlZmluZWQ7CiAgICAgIGxldCByZXMgPSBhd2FpdCBzZW5kQW5zd2VyKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uJyksIGFucykKICAgICAgaWYgKHJlcy5lbmQgPT09IHRydWUpIHsKICAgICAgICB0aGlzLiR3YXJuaW5nKHsKICAgICAgICAgIHRpdGxlOiBg0JLRiyDQv9GA0L7QuNCz0YDQsNC70LguINCf0YDQvtC20LjRgtC+INC00L3QtdC5ICR7dGhpcy5kYXl9YAogICAgICAgIH0pCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICdzdGFydCd9KQogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgIGNvbnNvbGUubG9nKHJlcy5oZWFsdGgpCiAgICAgIGNvbnNvbGUubG9nKHRoaXMudXNlci5oZWFsdGgpCiAgICAgIGNvbnNvbGUubG9nKHJlcy5oZWFsdGggLSB0aGlzLnVzZXIuaGVhbHRoKQoKICAgICAgdGhpcy5kYXkgPSByZXMucm91bmQKICAgICAgdGhpcy5kZXNjciA9IHJlcy5kZXNjcmlwdGlvbgogICAgICB0aGlzLmxlZnQgPSByZXMubGVmdF9hbnN3ZXIKICAgICAgdGhpcy5yaWdodCA9IHJlcy5yaWdodF9hbnN3ZXIKICAgICAgdGhpcy5hbnN3ZXJzID0gcmVzLmFuc3dlcjsKCiAgICAgIHRoaXMudXNlci5oZWFsdGggPSByZXMuaGVhbHRoCiAgICAgIHRoaXMudXNlci5tb25leSA9IHJlcy5tb25leQogICAgICB0aGlzLnVzZXIucG9pbnQgPSByZXMucG9pbnQKICAgICAgdGhpcy51c2VyLnJvdW5kID0gcmVzLnJvdW5kCgogICAgICB0aGlzLmRpcyA9IGZhbHNlCgogICAgICBpZiAocmVzLmdvb2RfZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbyhyZXMuZ29vZF9kZXNjcmlwdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChyZXMuZW5kX2dhbWUgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmFuc3dlcnMgPSBbXTsKICAgICAgICB0aGlzLnNob3dfYnRuID0gdHJ1ZTsKICAgICAgICBpZiAodGhpcy51c2VyLmhlYWx0aCA+IDAgJiYgdGhpcy51c2VyLm1vbmV5ID4gMCkgewogICAgICAgICAgdGhpcy5zaG93X2ZpcmUgPSB0cnVlOwogICAgICAgICAgdGhpcy5kZXNjciA9ICLQmNCz0YDQsCDQvtC60L7QvdGH0LXQvdCwITxiciAvPjxiciAvPiIKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5kZXNjciA9ICLQktGLINC/0YDQvtC40LPRgNCw0LvQuCA6YyA8YnIgLz48YnIgLz4iCiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0sCiAgbW91bnRlZCgpIHsKCiAgICBsZXQgcHJvZmlsZSA9IGdldFByb2ZpbGUoKQogICAgaWYgKHByb2ZpbGUgIT09IGZhbHNlKSB7CiAgICAgIHRoaXMucHJvZmlsZVVzZXIgPSBwcm9maWxlOwogICAgICBwcm9maWxlLnRoZW4odmFsID0+IHsKICAgICAgICB0aGlzLnByb2ZpbGVVc2VyID0gdmFsCiAgICAgICAgY29uc29sZS5sb2coItCf0YDQvtGE0LjQu9GMOiAiLCB0aGlzLnByb2ZpbGVVc2VyLnBpYyk7CiAgICAgICAgdGhpcy51c2VyLnBpYyA9IHRoaXMucHJvZmlsZVVzZXIucGljOwogICAgICAgIHRoaXMudXNlci5uYW1lID0gdGhpcy5wcm9maWxlVXNlci5uYW1lczsKICAgICAgfSk7CiAgICB9CgogICAgbGV0IHR5cGUgPSB0aGlzLiRyb3V0ZS5xdWVyeS50eXBlCiAgICBpZiAodHlwZSA9PT0gJ3Jlc3VtZScpIHsKICAgICAgdGhpcy5yZXN1bWVHYW1lKCkKICAgICAgcmV0dXJuCiAgICB9CiAgICB0aGlzLnN0YXJ0TmV3R2FtZSgpOwogIH0sCgp9Owo="},{"version":3,"sources":["Game.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Game.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"game-container\">\n    <div class=\"top-menu\">\n      <div class=\"actual-day\" style=\"font-size: 28pt;\">\n        День - {{ day }}\n      </div>\n    </div>\n\n    <div class=\"bottom-menu\">\n        <a-row :span=\"3\">\n          <a-avatar :size=\"64\" :src=\"this.user.pic\" style=\"margin: 15px;\"/>\n        </a-row>\n        <a-row :span=\"24\" class=\"stats-game\" style=\"font-size: 14pt; padding-bottom: 15px;\">\n          <div>Информационное здоровье: {{user.health}}</div>\n          <div>Деньги: {{user.money}}₽</div>\n          <div>Очки: {{user.point}}</div>\n          <div>Прожито дней: {{user.round}}</div>\n          <a-button v-on:click=\"toProfile()\" style=\" float: left; font-size: 14pt; margin-top: 15px; height: 60px\">В профиль</a-button>\n        </a-row>\n    </div>\n\n    <div class=\"outer\" style=\"height:80vh; width: 100%;\" v-if=\"descr != ''\">\n      <div class=\"inner\">\n\n\n        <div class=\"card-box\">\n          <div\n              style=\"font-size: 20pt; word-wrap: break-word; padding-left: 10px; padding-right: 10px; padding-top: 50px;\">\n            <b v-html=\"descr\"></b><br />\n\n            <img :src=\"pic\" style=\"margin-top: 50px; max-height: 500px; max-width: 100%; margin-bottom: 50px;\" v-if=\"pic\"/>\n\n            <img src=\"../assets/confetti-4.gif\" style=\"margin-top: 15px; max-height: 500px; width: 90%; margin-bottom: 15px;\" v-if=\"this.show_fire\"/>\n            <a-button @click=\"toRating\" v-if=\"this.show_btn\"\n                      style=\"white-space: normal; justify-content: center; width: 100%; min-height: 100px; margin-bottom: 15px;\"\n                      block>Рейтинг</a-button>\n          </div>\n        </div>\n        <div style=\"\n            width: 90%;\n            margin-left: 5%;\n            background: rgba(255,255,255,0.8);\n            \">\n          <a-button v-for=\"(item, index) in this.answers\"\n                    style=\"white-space: normal; justify-content: center; width: 100%; min-height: 100px;\" :disabled=\"dis\"\n                    @click=\"sendAnswer(index)\">\n            {{ item.description }}\n          </a-button>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport {newGame, reloadGame, sendAnswer, resumeGame} from '@/api/game'\nimport {getProfile} from \"../api/auth\";\n\nexport default {\n  data() {\n    return {\n      dis: false,\n      user: {\n        name: '',\n        health: 0,\n        money: 0,\n        point: 0,\n        round: 0\n      },\n\n      pic: '',\n      day: 0,\n      left: '',\n      right: '',\n      descr: '',\n\n      leftAction: {},\n\n      show_btn: false,\n      show_fire: false\n\n    }\n  },\n  methods: {\n    toProfile: function () {\n      this.$router.push('/start');\n    },\n    toRating: function() {\n      this.$router.push('/rating');\n    },\n\n    async startNewGame() {\n      let id = this.$route.query.id\n      if (!id) {\n        this.$router.push({path: 'start'})\n        return\n      }\n      this.$router.replace({id: '-1'})\n\n\n      let res = await newGame(localStorage.getItem('session'), id)\n      this.day = res.round\n      this.descr = res.description\n      this.left = res.left_answer\n      this.right = res.right_answer\n      this.pic = false;\n\n      this.pic = res.pic\n      this.user.pic = res.person_pic\n      this.user.name = res.name\n      this.user.health = res.health\n      this.user.money = res.money\n      this.user.point = res.point\n      this.user.round = res.round\n      this.answers = res.answer;\n      this.end_game = res.end_game;\n\n      let profile = getProfile()\n      if (profile !== false) {\n        this.profileUser = profile;\n        profile.then(val => {\n          this.profileUser = val\n          console.log(\"Профиль: \", this.profileUser)\n          // this.user.pic = this.profileUser.pic;\n          this.user.name = this.profileUser.names;\n        });\n      }\n\n    },\n\n    async resumeGame() {\n      let res = await resumeGame(localStorage.getItem('session'))\n      this.day = res.round\n      this.descr = res.description\n      this.left = res.left_answer\n      this.right = res.right_answer\n      this.answers = res.answer;\n      this.end_game = res.end_game;\n\n      console.log(this.answers);\n\n      this.pic = res.pic\n      this.user.pic = res.person_pic\n      this.user.health = res.health\n      this.user.money = res.money\n      this.user.point = res.point\n      this.user.round = res.round\n\n\n      let profile = getProfile()\n      if (profile !== false) {\n        this.profileUser = profile;\n        profile.then(val => {\n          this.profileUser = val\n          console.log(\"Профиль: \", this.profileUser)\n          // this.user.pic = this.profileUser.pic;\n          this.user.name = this.profileUser.names;\n        });\n      }\n    },\n\n    async sendAnswer(ans) {\n      this.dis = true\n      this.pic = undefined;\n      let res = await sendAnswer(localStorage.getItem('session'), ans)\n      if (res.end === true) {\n        this.$warning({\n          title: `Вы проиграли. Прожито дней ${this.day}`\n        })\n        this.$router.push({path: 'start'})\n      }\n      console.log(res);\n      console.log(res.health)\n      console.log(this.user.health)\n      console.log(res.health - this.user.health)\n\n      this.day = res.round\n      this.descr = res.description\n      this.left = res.left_answer\n      this.right = res.right_answer\n      this.answers = res.answer;\n\n      this.user.health = res.health\n      this.user.money = res.money\n      this.user.point = res.point\n      this.user.round = res.round\n\n      this.dis = false\n\n      if (res.good_description !== undefined) {\n        this.$message.info(res.good_description);\n      }\n\n      if (res.end_game === true) {\n        this.answers = [];\n        this.show_btn = true;\n        if (this.user.health > 0 && this.user.money > 0) {\n          this.show_fire = true;\n          this.descr = \"Игра окончена!<br /><br />\"\n        } else {\n          this.descr = \"Вы проиграли :c <br /><br />\"\n        }\n      }\n    }\n\n  },\n  mounted() {\n\n    let profile = getProfile()\n    if (profile !== false) {\n      this.profileUser = profile;\n      profile.then(val => {\n        this.profileUser = val\n        console.log(\"Профиль: \", this.profileUser.pic);\n        this.user.pic = this.profileUser.pic;\n        this.user.name = this.profileUser.names;\n      });\n    }\n\n    let type = this.$route.query.type\n    if (type === 'resume') {\n      this.resumeGame()\n      return\n    }\n    this.startNewGame();\n  },\n\n};\n</script>\n<style>\n.right {\n  margin-left: 15px;\n}\n\n.left {\n  margin-right: 15px;\n}\n\n.left > .ant-btn-icon-only {\n  width: 64px;\n  height: 64px;\n}\n\n.right > .ant-btn-icon-only {\n  width: 64px;\n  height: 64px;\n}\n\n.outer:before {\n  content: '';\n  display: inline-block;\n  height: 100%;\n  vertical-align: middle;\n}\n\n.inner {\n  width: 100%;\n  display: inline-block;\n  margin-top: 50px;\n}\n\n.outer {\n  text-align: center;\n}\n\n.left, .right, .card-box {\n  display: inline-block;\n}\n\n.center-menu {\n  margin-top: 80px;\n  width: 30%;\n  margin-left: 35%;\n}\n\n.card-box {\n  width: 90%;\n  background: rgba(255, 255, 255, 0.8);\n}\n\n.actual-day {\n  font-size: 24px;\n  background: rgba(255, 255, 255, 0.8);\n  border-radius: 0px 0px 5px 5px;\n  width: 50%;\n  top: 0px;\n  margin-left: 25%;\n}\n\n.game-container {\n  height: 100vh;\n  width: 100vw;\n}\n\n.center-menu {\n  vertical-align: middle;\n}\n\n.stats-game {\n  margin-left: 30px;\n  margin-top: 10px;\n  text-align: left\n}\n\n.ant-progress-line {\n  margin-left: 10px;\n  width: 80% !important;\n}\n\n.bottom-menu {\n  border: solid 1.2px black;\n  border-radius: 5px 5px 0px 0px;\n  left: 25%;\n  background: rgba(255, 255, 255, 0.8);\n  margin: 50px auto 0;\n}\n\n</style>\n"]}]}