{"remainingRequest":"/Users/lalow_/Desktop/Front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lalow_/Desktop/Front/src/views/StartGame.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lalow_/Desktop/Front/src/views/StartGame.vue","mtime":1650799321221},{"path":"/Users/lalow_/Desktop/Front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgaW1wb3J0IHtnZXRQZXJzb24sIGdldFByb2ZpbGV9IGZyb20gIi4uL2FwaS9hdXRoIjsKICBpbXBvcnQgeyBnZXRHYW1lIH0gZnJvbSAiQC9hcGkvZ2FtZSIKICBpbXBvcnQgTGluZUNoYXJ0IGZyb20gJy4uL3N0b3JlL0xpbmVDaGFydC5qcycKZXhwb3J0IGRlZmF1bHQgewogICAgY29tcG9uZW50czogewogICAgICBMaW5lQ2hhcnQsCiAgICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuZXdHYW1lOiBCb29sZWFuLAogICAgICBpc0xvYWRlZDogZmFsc2UsCiAgICAgIHBlcnNvbnM6IFtdLAogICAgICBwcm9maWxlVXNlcjogdW5kZWZpbmVkLAogICAgICBwcm9ncmVzczogbnVsbCwKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHRvR2FtZSAoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy9nYW1lJywgcXVlcnk6IHsgdHlwZTogJ3Jlc3VtZScgfSB9KQogICAgfSwKICAgIHRvQ2hvaWNlUGVyczogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvY2hvaWNlJykKICAgIH0sCiAgICB0b1JhdGluZzogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcmF0aW5nJyk7CiAgICB9LAogICAgdG9NYWluOiBmdW5jdGlvbigpIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Nlc3Npb24nKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKICAgIH0sCiAgICBnZXRNeVByb2ZpbGU6IGZ1bmN0aW9uICgpIHsKICAgICAgLy8g0L/QvtC70YPRh9C10L3QuNC1INC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtQogICAgICBsZXQgcHJvZmlsZSA9IGdldFByb2ZpbGUoKQogICAgICBjb25zb2xlLmxvZyhwcm9maWxlKTsKICAgICAgaWYgKHByb2ZpbGUgIT09IGZhbHNlKSB7CiAgICAgICAgdGhpcy5wcm9maWxlVXNlciA9IHByb2ZpbGU7CiAgICAgICAgcHJvZmlsZS50aGVuKHZhbCA9PiB7CiAgICAgICAgICB0aGlzLnByb2ZpbGVVc2VyID0gdmFsCiAgICAgICAgICBjb25zb2xlLmxvZygi0J/RgNC+0YTQuNC70Yw6ICIsIHRoaXMucHJvZmlsZVVzZXIpCiAgICAgICAgICB2YXIgdG1wQXJyID0gW107CiAgICAgICAgICBpZiAodmFsLmdhbWVfaGlzdG9yeSAmJiB2YWwuZ2FtZV9oaXN0b3J5ID4gMCkgewogICAgICAgICAgICB2YWwuZ2FtZV9oaXN0b3J5LmZvckVhY2gocGFyYW0gPT4gewogICAgICAgICAgICAgIHRtcEFyci5wdXNoKHsKICAgICAgICAgICAgICAgIGRhdGE6IFtwYXJhbS5yb3VuZCwgcGFyYW0ucm91bmRdLAogICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzFiNjhiMycKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBDaGFydC5kZWZhdWx0cy5nbG9iYWwubGVnZW5kLmRpc3BsYXkgPSBmYWxzZTsKICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSB7CiAgICAgICAgICAgIGRhdGFzZXRzOiB0bXBBcnIKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign0J7RiNC40LHQutCwINC/0L7Qu9GD0YfQtdC90LjRjyDQv9GA0L7RhNC40LvRjycpOwogICAgICB9CiAgICB9LAogICAgZ2V0QWxsUGVyc29uOiBmdW5jdGlvbiAoKSB7CiAgICAgIC8vINC/0L7Qu9GD0YfQtdC90LjQtSDQstGB0LXRhSDQv9C10YDRgdC+0L3QsNC20LXQuQogICAgICBsZXQgcmVzID0gZ2V0UGVyc29uKCkKICAgICAgaWYgKHJlcyAhPT0gZmFsc2UpIHsKICAgICAgICByZXMudGhlbih2YWwgPT4gewogICAgICAgICAgdGhpcy5wZXJzb25zID0gdmFsOwogICAgICAgICAgY29uc29sZS5sb2coItCf0LXRgNGB0L7QvdCw0LbQuDogIiwgdGhpcy5wZXJzb25zKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfQntGI0LjQsdC60LAg0L/QvtC70YPRh9C10L3QuNGPINC/0LXRgNGB0L7QvdCw0LbQtdC5Jyk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldE15UHJvZmlsZSgpOwogICAgdGhpcy5nZXRBbGxQZXJzb24oKTsKICAgIHRoaXMuaXNMb2FkZWQgPSB0cnVlOwogIH0sCn07Cg=="},{"version":3,"sources":["StartGame.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StartGame.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<a-row type=\"flex\" justify=\"center\" v-if=\"isLoaded\">\n  <a-col :span=\"24\">\n      <div class=\"box profile\">\n        <a-row class=\"title-profile\">\n          <a-col :span=\"8\">\n            <a-avatar :size=\"96\" :src=\"this.profileUser.pic\" />\n          </a-col>\n          <a-col :span=\"16\" class=\"mini-rating\">\n            <div style=\"font-size: 20pt\">Имя: {{profileUser.names}}</div>\n            <div style=\"font-size: 20pt\">Игр сыграно: {{profileUser.count_game}}</div>\n            <div style=\"font-size: 20pt\">Максимально дней: {{profileUser.max_point}}</div>\n          </a-col>\n        </a-row>\n        <div class=\"button-group\">\n          <a-button @click=\"toChoicePers\" block>Начать игру</a-button>\n          <a-button v-if=\"profileUser.continue\" @click=\"toGame\" block>Продолжить игру</a-button>\n          <a-button @click=\"toRating\" block>Рейтинг</a-button>\n          <a-button @click=\"toMain\" block>Выход</a-button>\n        </div>\n\n        <div class=\"person-list\" v-if=\"profileUser.game_history && profileUser.game_history.length !== 0\">\n          <h1 block>История игр</h1>\n          <div v-for=\"item in profileUser.game_history\" style=\"border: 1px solid black;\">\n            <a-row>\n              <a-col :span=\"4\">\n                <img :src=\"item.pic\" height=\"60\" width=\"60\" style=\"margin-top: 5px;\"/>\n                <h3>{{item.name}}</h3>\n              </a-col>\n              <a-col :span=\"20\">\n                <table width=\"100%\" border=\"1\">\n                  <tr>\n                    <th>Информационное здоровье</th>\n                    <th>Деньги</th>\n                    <th>Очки</th>\n                    <th>Прожито дней</th>\n                  </tr>\n                  <tr>\n                    <td>{{item.health}}</td>\n                    <td>{{item.money}}₽</td>\n                    <td>{{item.point}}</td>\n                    <td>{{item.round}}</td>\n                  </tr>\n                </table>\n              </a-col>\n            </a-row>\n          </div>\n\n        </div>\n      </div>\n  </a-col>\n</a-row>\n</template>\n\n<script>\n  import {getPerson, getProfile} from \"../api/auth\";\n  import { getGame } from \"@/api/game\"\n  import LineChart from '../store/LineChart.js'\nexport default {\n    components: {\n      LineChart,\n    },\n  data() {\n    return {\n      newGame: Boolean,\n      isLoaded: false,\n      persons: [],\n      profileUser: undefined,\n      progress: null,\n    }\n  },\n  methods: {\n    toGame () {\n      this.$router.push({ path: '/game', query: { type: 'resume' } })\n    },\n    toChoicePers: function() {\n      this.$router.push('/choice')\n    },\n    toRating: function() {\n      this.$router.push('/rating');\n    },\n    toMain: function() {\n      localStorage.removeItem('session');\n      this.$router.push('/');\n    },\n    getMyProfile: function () {\n      // получение информации о пользователе\n      let profile = getProfile()\n      console.log(profile);\n      if (profile !== false) {\n        this.profileUser = profile;\n        profile.then(val => {\n          this.profileUser = val\n          console.log(\"Профиль: \", this.profileUser)\n          var tmpArr = [];\n          if (val.game_history && val.game_history > 0) {\n            val.game_history.forEach(param => {\n              tmpArr.push({\n                data: [param.round, param.round],\n                backgroundColor: '#1b68b3'\n              });\n            });\n          }\n          Chart.defaults.global.legend.display = false;\n          this.progress = {\n            datasets: tmpArr\n          };\n        });\n      } else {\n        this.$message.error('Ошибка получения профиля');\n      }\n    },\n    getAllPerson: function () {\n      // получение всех персонажей\n      let res = getPerson()\n      if (res !== false) {\n        res.then(val => {\n          this.persons = val;\n          console.log(\"Персонажи: \", this.persons);\n        });\n      } else {\n        this.$message.error('Ошибка получения персонажей');\n      }\n    }\n  },\n  mounted() {\n    this.getMyProfile();\n    this.getAllPerson();\n    this.isLoaded = true;\n  },\n};\n</script>\n<style>\n.profile .button-group {\n  margin-top: 20px;\n}\n.profile .button-group button{\n  margin-top: 5px;\n  font-size: 20pt;\n  height: 55px;\n}\n.mini-rating {\n  margin-top: 10px;\n}\n.mini-rating div {\n  text-decoration: underline;\n  font-size: 16px;\n  text-align: left;\n}\n.title-profile {\n\n}\n.ant-avatar {\n  background: #ad768f;\n  border: 1px #440522 solid;\n}\n#components-form .form {\n  max-width: 300px;\n}\n#components-form .form-button {\n  width: 100%;\n}\n.person-list {\n  margin-top: 20px;\n}\n</style>\n"]}]}