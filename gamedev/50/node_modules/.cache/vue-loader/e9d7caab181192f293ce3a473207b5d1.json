{"remainingRequest":"/Users/lalow_/Desktop/Front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lalow_/Desktop/Front/src/views/Auth.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/lalow_/Desktop/Front/src/views/Auth.vue","mtime":1616322460000},{"path":"/Users/lalow_/Desktop/Front/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lalow_/Desktop/Front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiNjb21wb25lbnRzLWZvcm0gLmZvcm0gewogIG1heC13aWR0aDogMzAwcHg7Cn0KI2NvbXBvbmVudHMtZm9ybSAuZm9ybS1idXR0b24gewogIHdpZHRoOiAxMDAlOwogIGZvbnQtc2l6ZTogMjhwdDsKICBoZWlnaHQ6IDc1cHg7Cn0KLmFudC1pbnB1dC1hZmZpeC13cmFwcGVyIC5hbnQtaW5wdXQ6bm90KDpmaXJzdC1jaGlsZCkgewogIHBhZGRpbmctbGVmdDogNTBweDsKfQo="},{"version":3,"sources":["Auth.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Auth.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<a-row type=\"flex\" justify=\"center\">\n  <a-col :span=\"35\">\n    <div class=\"box\">\n      <h2 style=\"font-size: 20pt;\">Авторизация</h2>\n        <a-form\n          id=\"components-form\"\n          :form=\"form\"\n          class=\"form\"\n          @submit=\"handleSubmit\"\n        >\n          <a-form-item>\n            <a-input\n              v-decorator=\"[\n                'login',\n                { rules: [{ required: true, message: 'Введите имя!' }] },\n              ]\"\n              placeholder=\"Username\"\n              style=\"font-size: 20pt; height: 60px\"\n            >\n              <a-icon slot=\"prefix\" type=\"user\" style=\"color: rgba(0,0,0,.25);\" />\n            </a-input>\n          </a-form-item>\n          <a-form-item>\n            <a-input\n              v-decorator=\"[\n                'password',\n                { rules: [{ required: true, message: 'Введите пароль!' }] },\n              ]\"\n              type=\"password\"\n              placeholder=\"Password\"\n              style=\"font-size: 20pt; height: 60px\"\n            >\n              <a-icon slot=\"prefix\" type=\"lock\" style=\"color: rgba(0,0,0,.25)\" />\n            </a-input>\n          </a-form-item>\n          <a-form-item style=\"font-size: 20pt;\">\n            <a-button type=\"primary\" html-type=\"submit\" class=\"form-button\" style=\"margin-bottom: 15px;\">\n              Вход\n            </a-button>\n            или\n            <router-link to=\"/reg\" style=\"color: #5a0000;\">\n              Зарегистрироваться\n            </router-link>\n          </a-form-item>\n        </a-form>\n      </div>\n    </a-col>\n</a-row>\n</template>\n\n<script>\nimport {authUser, getProfile} from \"../api/auth\";\n\nexport default {\n  beforeCreate() {\n    this.form = this.$form.createForm(this, { name: 'normal_login' });\n  },\n  methods: {\n    handleSubmit(e) {\n      e.preventDefault();\n      this.form.validateFields( async (err, values) => {\n        if (!err) {\n          console.log('Received values of form: ', values);\n          let res = await authUser(values)\n          if (res.error) {\n            this.$message.error(res.error);\n            return\n          }\n          if (res !== false) {\n            localStorage.setItem('session', res.session)\n            this.$router.push('/start')\n          } else {\n            this.$message.error(\"Пользователь с таким именем и паролем не существует\");\n          }\n        }\n      });\n    },\n  },\n  mounted() {\n    if (localStorage.getItem('session') !== null) {\n      let profile = getProfile()\n      if (profile !== false) {\n        this.profileUser = profile;\n        profile.then(val => {\n          this.profileUser = val\n          console.log(\"Профиль: \", this.profileUser);\n          if (this.profileUser !== false) {\n            this.$router.push('/start')\n          }\n        });\n      }\n    }\n  },\n};\n</script>\n<style>\n#components-form .form {\n  max-width: 300px;\n}\n#components-form .form-button {\n  width: 100%;\n  font-size: 28pt;\n  height: 75px;\n}\n.ant-input-affix-wrapper .ant-input:not(:first-child) {\n  padding-left: 50px;\n}\n</style>\n"]}]}